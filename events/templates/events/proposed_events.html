{% extends 'base.html' %}
{% load static %}
{% load event_tags %}

{% block title %} Events {% endblock title%}
{% block content %}

<div class="pt-16">
    <header>
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
            <h1 class="text-3xl font-bold leading-tight tracking-tight text-gray-900">Proposed Events</h1>
        </div>
    </header>
    <main>
        <div class="mx-auto max-w-7xl pt-8 sm:px-6 lg:px-8">
            <ul role="list" class="grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
            {% for event in events %}            
                <li class="col-span-1 flex flex-col divide-y divide-gray-200 rounded-lg bg-white text-center shadow">
                  <div class="flex flex-1 flex-col p-8">
                    {% comment %} <img class="mx-auto h-32 w-32 flex-shrink-0 rounded-full" src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=4&w=256&h=256&q=60" alt=""> {% endcomment %}
                    <h3 class="text-sm font-medium text-gray-900 text-left">{{ event.name }}</h3>
                    <dl class="mt-1 flex flex-grow flex-col justify-between">
                      <dt class="sr-only">Description</dt>
                      <dd class="text-sm text-gray-500 text-left">{{ event.description|slice:":100" }}</dd>
                      {% comment %} <dt class="sr-only">Role</dt>
                      <dd class="mt-3">
                        <span class="inline-flex items-center rounded-full bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20">Admin</span> <!-- Badge -->
                      </dd> {% endcomment %}
                      
                    </dl>
                    <div class="flex w-full text-sm justify-between items-center mt-3">
                      <div class="flex items-center space-x-1">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        class="w-8 icon-map"
                      >
                        <path
                          class="primary"
                          d="M15 18.12L9.45 20.9a1 1 0 0 1-.9 0l-6-3A1 1 0 0 1 2 17V4a1 1 0 0 1 1.45-.9L9 5.89l5.55-2.77a1 1 0 0 1 .9 0l6 3A1 1 0 0 1 22 7v13a1 1 0 0 1-1.45.89L15 18.12z"
                        />
                        <path
                          class="secondary"
                          d="M9 21V5.88l5.55-2.77A1 1 0 0 1 15 3v15.1L9.45 20.9A1 1 0 0 1 9 21z"
                        />
                      </svg>
                      <span class="inline">{{event.location|capfirst }}</span>
                      </div>
                      <span class="{% event_status_color event.status%} px-3 py-1 rounded-xl border-2">{{ event.get_status_display }}</span>
                    </div>
                  </div>
                  <div>
                    <div class="-mt-px flex divide-x divide-gray-200">
                      <div class="flex w-0 flex-1">
                        <a {% if request.user.is_authenticated %} hx-post="{% url 'upvote' event.id %}" {% else %} onclick="window.location.href='{% url "account_login" %} ';" {% endif %}class="cursor-pointer relative -mr-px inline-flex w-0 flex-1 items-center justify-center gap-x-3 rounded-bl-lg border border-transparent py-4 text-sm font-semibold text-gray-900">
                          <i class="{% if event|upvoted:request.user %} fa-solid {% else %} fa-regular {% endif %} fa-thumbs-up"></i>
                          {{event.number_of_upvotes}} Up Vote{{event.number_of_upvotes|pluralize}}
                        </a>
                      </div>
                      <div class="-ml-px flex w-0 flex-1">
                        <a href="{% url 'eventDetail' event.id %}" class="relative inline-flex w-0 flex-1 items-center justify-center gap-x-3 rounded-br-lg border border-transparent py-4 text-sm font-semibold text-gray-900">
                          <i class="fa-solid fa-list"></i>Details
                        </a>
                      </div>
                    </div>
                  </div>
                </li>
                {% endfor %}
              </ul>
        </div>
    </main>
</div>
  

{% endblock content %}